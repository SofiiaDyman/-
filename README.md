# Student Housing

## Опис проекту

**Student Housing** — це веб-додаток для пошуку, розміщення та управління оголошеннями про житло для студентів. Користувачі можуть реєструватися, додавати оголошення, фільтрувати пропозиції за різними параметрами, зберігати улюблені варіанти та керувати своїми оголошеннями.

---

## Технології та бібліотеки

- **Backend:** Node.js, Express.js
- **Frontend:** HTML, CSS, JavaScript (Vanilla)
- **База даних:** MySQL
- **Документація API:** Swagger
- **Авторизація/Автентифікація:** JWT, Cookies
- **Інші бібліотеки:**
  - `mysql2` — для роботи з MySQL
  - `swagger-ui-express` — для інтеграції Swagger
  - `dotenv` — для роботи з конфігураціями

---

## Структура проекту

```
student-housing/
│
├── backend/
│   ├── db.js                // Підключення до бази даних
│   ├── server.js            // Запуск сервера Express
│   ├── swagger.js           // Swagger API документація
│   ├── package.json         // Залежності та скрипти
│   ├── middleware/
│   │   └── auth.js          // Middleware для авторизації
│   └── routes/
│       ├── auth.js          // Реєстрація, логін, профіль
│       ├── favorites.js     // Улюблені оголошення
│       └── listings.js      // CRUD для оголошень, фільтрація
│
├── database/
│   └── schema.sql           // SQL-структура бази даних
│
├── frontend/
│   ├── index.html           // Головна сторінка
│   ├── script.js            // Логіка взаємодії з API
│   └── style.css            // Стилизація
│
└── TESTING_GUIDE.md         // Інструкції з тестування
```

---

## Встановлення та запуск

1. **Клонувати репозиторій:**
   ```
   git clone <repo-url>
   cd student-housing
   ```

2. **Налаштувати базу даних:**
   - Створити базу даних MySQL.
   - Виконати `database/schema.sql` для створення таблиць.

3. **Налаштувати backend:**
   - Перейти в папку `backend`
   - Створити `.env` з параметрами підключення до БД та секретом JWT.
   - Встановити залежності:
     ```
     npm install
     ```
   - Запустити сервер:
     ```
     node server.js
     ```

4. **Запустити frontend:**
   - Відкрити `frontend/index.html` у браузері.

5. **API Документація:**
   - Swagger доступний за адресою: `http://localhost:3000/api-docs`

---

## Авторизація та автентифікація

- Реалізовано через JWT (JSON Web Token).
- Після логіну токен зберігається у cookie.
- Middleware `auth.js` перевіряє токен для захищених маршрутів (додавання, редагування, видалення оголошень, улюблені).
- Кожен користувач має унікальний `student_id` (`user_<id>`).

---

## API Документація

- Всі маршрути описані у Swagger (`backend/swagger.js`).
- Основні ендпоінти:
  - `/api/auth/register` — реєстрація
  - `/api/auth/login` — логін
  - `/api/listings` — отримати всі оголошення
  - `/api/listings/filter` — фільтрація оголошень
  - `/api/listings/:id` — отримати, оновити, видалити оголошення
  - `/api/favorites` — робота з улюбленими

---

## Тестування

- Інструкції у `TESTING_GUIDE.md`.
- Рекомендується тестувати через Swagger, Postman або фронтенд.
- Перевірити:
  - Реєстрацію та логін
  - Додавання, редагування, видалення оголошень
  - Фільтрацію
  - Додавання/видалення улюблених

---

## Особливості

- Фільтрація оголошень за ціною, районом, факультетом, статтю.
- CRUD для оголошень.
- Захист маршрутів через JWT.
- Swagger-документація.
- Зручна структура для розширення функціоналу.

---

## База даних

- MySQL, структура у `database/schema.sql`.
- Основні таблиці:
  - `users` — користувачі
  - `listings` — оголошення
  - `favorites` — улюблені оголошення
- Зв’язки: оголошення належать користувачу, улюблені — через зв’язок user-listing.

---
